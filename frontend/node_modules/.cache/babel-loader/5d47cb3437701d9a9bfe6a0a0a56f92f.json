{"ast":null,"code":"import \"../Firebase\";\nimport router from \"../router\";\n// @click=\"CheckOutProducts\"\nimport { addDoc, collection, query, getFirestore, onSnapshot } from \"firebase/firestore\";\nconst db = getFirestore();\nconst q = query(collection(db, \"Checkout\"));\nconst authusers = query(collection(db, \"users\"));\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nvar today = new Date();\nvar now_date = today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate();\nconst auth = getAuth();\nexport default {\n  name: \"CartView\",\n  data() {\n    return {\n      uid: localStorage.getItem(\"uidUser\"),\n      CheckAuth: null\n    };\n  },\n  computed: {\n    totalPrice() {\n      let total = 0;\n      for (let item of this.$store.state.cart) {\n        total += item.totalPrice;\n      }\n      total = total + 7;\n      return total.toFixed(2);\n    }\n  },\n  methods: {\n    addToCart(item) {\n      this.$store.commit(\"addToCart\", item);\n      console.log(item);\n    },\n    removeFromCart(item) {\n      this.$store.commit(\"removeFromCart\", item);\n    },\n    decrementQuentity(item) {\n      this.$store.commit(\"decrementQuentity\", item);\n    },\n    CheckOutProducts() {\n      onSnapshot(authusers, querySnapshot => {\n        querySnapshot.forEach(doc => {\n          if (doc.data().uid == this.uid) {\n            addDoc(q, {\n              name: doc.data().name,\n              number: doc.data().number,\n              address: doc.data().address,\n              date: now_date,\n              total: this.totalPrice,\n              cart: this.$store.state.cart\n            }).then(() => {\n              this.$store.commit(\"resetCart\");\n            });\n          }\n        });\n      });\n    },\n    CreateAccount() {\n      router.push(\"/signin\");\n      document.getElementById(\"close1\").click();\n    },\n    Login() {\n      router.push(\"/login\");\n      document.getElementById(\"close1\").click();\n    }\n  },\n  created() {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        this.CheckAuth = user;\n      } else {\n        this.CheckAuth = null;\n      }\n    });\n  }\n};","map":{"version":3,"mappings":"AA6RA,OAAO,aAAa;AACpB,OAAOA,MAAK,MAAO,WAAW;AAC9B;AACA,SACEC,MAAM,EACNC,UAAU,EACVC,KAAK,EACLC,YAAY,EACZC,UAAU,QACL,oBAAoB;AAC3B,MAAMC,EAAC,GAAIF,YAAY,CAAC,CAAC;AACzB,MAAMG,IAAIJ,KAAK,CAACD,UAAU,CAACI,EAAE,EAAE,UAAU,CAAC,CAAC;AAC3C,MAAME,SAAQ,GAAIL,KAAK,CAACD,UAAU,CAACI,EAAE,EAAE,OAAO,CAAC,CAAC;AAChD,SAASG,OAAO,EAAEC,kBAAiB,QAAS,eAAe;AAC3D,IAAIC,KAAI,GAAI,IAAIC,IAAI,CAAC,CAAC;AACtB,IAAIC,QAAO,GACTF,KAAK,CAACG,WAAW,CAAC,IAAI,GAAE,IAAKH,KAAK,CAACI,QAAQ,CAAC,IAAI,CAAC,IAAI,GAAE,GAAIJ,KAAK,CAACK,OAAO,CAAC,CAAC;AAC5E,MAAMC,IAAG,GAAIR,OAAO,CAAC,CAAC;AACtB,eAAe;EACbS,IAAI,EAAE,UAAU;EAChBC,IAAIA,GAAG;IACL,OAAO;MACLC,GAAG,EAAEC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;MACpCC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,UAAUA,GAAG;MACX,IAAIC,KAAI,GAAI,CAAC;MAEb,KAAK,IAAIC,IAAG,IAAK,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,IAAI,EAAE;QACvCJ,KAAI,IAAKC,IAAI,CAACF,UAAU;MAC1B;MACAC,KAAI,GAAIA,KAAI,GAAI,CAAC;MACjB,OAAOA,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC;IACzB;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,SAASA,CAACN,IAAI,EAAE;MACd,IAAI,CAACC,MAAM,CAACM,MAAM,CAAC,WAAW,EAAEP,IAAI,CAAC;MAErCQ,OAAO,CAACC,GAAG,CAACT,IAAI,CAAC;IACnB,CAAC;IACDU,cAAcA,CAACV,IAAI,EAAE;MACnB,IAAI,CAACC,MAAM,CAACM,MAAM,CAAC,gBAAgB,EAAEP,IAAI,CAAC;IAC5C,CAAC;IACDW,iBAAiBA,CAACX,IAAI,EAAE;MACtB,IAAI,CAACC,MAAM,CAACM,MAAM,CAAC,mBAAmB,EAAEP,IAAI,CAAC;IAC/C,CAAC;IACDY,gBAAgBA,GAAG;MACjBlC,UAAU,CAACG,SAAS,EAAGgC,aAAa,IAAK;QACvCA,aAAa,CAACC,OAAO,CAAEC,GAAG,IAAK;UAC7B,IAAIA,GAAG,CAACvB,IAAI,CAAC,CAAC,CAACC,GAAE,IAAK,IAAI,CAACA,GAAG,EAAE;YAC9BnB,MAAM,CACJM,CAAC,EAED;cACEW,IAAI,EAAEwB,GAAG,CAACvB,IAAI,CAAC,CAAC,CAACD,IAAI;cACrByB,MAAM,EAAED,GAAG,CAACvB,IAAI,CAAC,CAAC,CAACwB,MAAM;cACzBC,OAAO,EAAEF,GAAG,CAACvB,IAAI,CAAC,CAAC,CAACyB,OAAO;cAC3BC,IAAI,EAAEhC,QAAQ;cACda,KAAK,EAAE,IAAI,CAACD,UAAU;cACtBK,IAAI,EAAE,IAAI,CAACF,MAAM,CAACC,KAAK,CAACC;YAC1B,CACF,CAAC,CAACgB,IAAI,CAAC,MAAM;cACX,IAAI,CAAClB,MAAM,CAACM,MAAM,CAAC,WAAW,CAAC;YACjC,CAAC,CAAC;UACJ;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IACDa,aAAaA,GAAG;MACd/C,MAAM,CAACgD,IAAI,CAAC,SAAS,CAAC;MACtBC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACC,KAAK,CAAC,CAAC;IAC3C,CAAC;IACDC,KAAKA,GAAG;MACNpD,MAAM,CAACgD,IAAI,CAAC,QAAQ,CAAC;MACrBC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAAC,CAACC,KAAK,CAAC,CAAC;IAC3C;EACF,CAAC;EACDE,OAAOA,GAAG;IACR3C,kBAAkB,CAACO,IAAI,EAAGqC,IAAI,IAAK;MACjC,IAAIA,IAAI,EAAE;QACR,IAAI,CAAC/B,SAAQ,GAAI+B,IAAI;MACvB,OAAO;QACL,IAAI,CAAC/B,SAAQ,GAAI,IAAI;MACvB;IACF,CAAC,CAAC;EACJ;AACF,CAAC","names":["router","addDoc","collection","query","getFirestore","onSnapshot","db","q","authusers","getAuth","onAuthStateChanged","today","Date","now_date","getFullYear","getMonth","getDate","auth","name","data","uid","localStorage","getItem","CheckAuth","computed","totalPrice","total","item","$store","state","cart","toFixed","methods","addToCart","commit","console","log","removeFromCart","decrementQuentity","CheckOutProducts","querySnapshot","forEach","doc","number","address","date","then","CreateAccount","push","document","getElementById","click","Login","created","user"],"sourceRoot":"","sources":["C:\\Users\\qimeng\\Documents\\GitHub\\trading_platform\\frontend\\src\\views\\Cart.vue"],"sourcesContent":["<template>\n  <div>\n    <section class=\"h-100 h-custom\">\n      <div class=\"container h-100 py-5\">\n        <div\n          v-if=\"$store.state.cart.length > 0\"\n          class=\"row d-flex justify-content-center align-items-center h-100\"\n        >\n          <div class=\"col\">\n            <div class=\"table-responsive\">\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\" class=\"h5\">Shopping Bag</th>\n\n                    <th scope=\"col\">Quantity</th>\n                    <th scope=\"col\">Price</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"item in $store.state.cart\" :key=\"item.name\">\n                    <th scope=\"row\" class=\"border-bottom-0\">\n                      <div class=\"d-flex align-items-center\">\n                        <img\n                          :src=\"item.image\"\n                          class=\"img-fluid rounded-3\"\n                          style=\"width: 83px; height: 112px\"\n                          alt=\"Book\"\n                        />\n                        <div class=\"flex-column ms-4\">\n                          <p class=\"mb-2\">\n                            {{ item.name }}\n                          </p>\n                          <p class=\"mb-0\">{{ item.brand }}</p>\n                        </div>\n                      </div>\n                    </th>\n\n                    <td class=\"align-middle border-bottom-0\">\n                      <div class=\"d-flex flex-row\">\n                        <button\n                          class=\"btn btn-link px-2\"\n                          @click=\"decrementQuentity(item)\"\n                        >\n                          <i class=\"fas fa-minus\"></i>\n                        </button>\n\n                        <input\n                          id=\"form1\"\n                          min=\"1\"\n                          name=\"quantity\"\n                          :value=\"item.quantity\"\n                          type=\"number\"\n                          class=\"form-control form-control-sm\"\n                          style=\"width: 53px\"\n                        />\n\n                        <button\n                          class=\"btn btn-link px-2\"\n                          @click=\"addToCart(item)\"\n                        >\n                          <i class=\"fas fa-plus\"></i>\n                        </button>\n                      </div>\n                    </td>\n                    <td class=\"align-middle border-bottom-0\">\n                      <p class=\"mb-0\" style=\"font-weight: 500\">\n                        {{ item.totalPrice }} DT\n                      </p>\n                    </td>\n                    <td class=\"align-middle border-bottom-0\">\n                      <img\n                        class=\"mb-0\"\n                        style=\"height: 25px\"\n                        src=\"../assets/icons8_close_50px.png\"\n                        @click=\"removeFromCart(item)\"\n                      />\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div\n            class=\"card shadow-2-strong mb-5 mb-lg-0\"\n            style=\"border-radius: 16px\"\n          >\n            <div class=\"card-body p-4\">\n              <div class=\"row\">\n                <div class=\"col-lg-4 col-xl-3\">\n                  <div\n                    class=\"d-flex justify-content-between\"\n                    style=\"font-weight: 500\"\n                  >\n                    <p class=\"mb-2\">Subtotal</p>\n                    <p class=\"mb-2\">{{ totalPrice - 7 }} DT</p>\n                  </div>\n\n                  <div\n                    class=\"d-flex justify-content-between\"\n                    style=\"font-weight: 500\"\n                  >\n                    <p class=\"mb-0\">Shipping</p>\n                    <p class=\"mb-0\">7 DT</p>\n                  </div>\n\n                  <hr class=\"my-4\" />\n\n                  <div\n                    class=\"d-flex justify-content-between mb-4\"\n                    style=\"font-weight: 500\"\n                  >\n                    <p class=\"mb-2\">Total (Shipping included)</p>\n                    <p class=\"mb-2\">{{ totalPrice }}DT</p>\n                  </div>\n\n                  <button\n                    @click=\"CheckOutProducts\"\n                    type=\"button\"\n                    v-if=\"CheckAuth\"\n                    class=\"btn btn-primary btn-block btn-lg\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#exampleModal\"\n                  >\n                    <div class=\"d-flex justify-content-between\">\n                      <span>Checkout</span>\n                    </div>\n                  </button>\n                  <button\n                    type=\"button\"\n                    v-if=\"CheckAuth == null\"\n                    class=\"btn btn-primary btn-block btn-lg\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#exampleModal1\"\n                  >\n                    <div class=\"d-flex justify-content-between\">\n                      <span>Checkout</span>\n                    </div>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div\n          v-else\n          class=\"row d-flex justify-content-center align-items-center h-100\"\n        >\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th scope=\"col\" class=\"h5\">Shopping Bag</th>\n              </tr>\n            </thead>\n          </table>\n          <br />\n          <div>\n            <center>Cart is empty</center>\n            <br />\n            <br />\n            <router-link to=\"/products\">\n              <img src=\"../assets/icons8_back_64px.png\" style=\"height: 37px\" />\n            </router-link>\n            <a style=\"width: auto\"> Continue shopping </a>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n  <!-- Modal -->\n  <div\n    class=\"modal fade\"\n    id=\"exampleModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\" style=\"border: black\">\n        <div class=\"modal-header\" style=\"background: #242121; color: white\">\n          <div class=\"r\" style=\"display: flex; margin: auto\">\n            <img src=\"../assets/icons8_Done_64px_1.png\" style=\"height: 31px\" />\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n              Order will be processed\n            </h5>\n          </div>\n        </div>\n        <div class=\"modal-body\" style=\"display: flex\">\n          <div class=\"row g-0\">\n            <div class=\"col-md-4\">\n              <img\n                src=\"../assets/time-check-symbol_ready_timer_checkmark_countdown_compliance_done_reminder-512.webp\"\n                class=\"img-fluid rounded-start\"\n                alt=\"...\"\n              />\n            </div>\n            <div class=\"col\">\n              <p class=\"card-text\" style=\"margin-top: 62px; margin-left: 46px\">\n                Your order will be processed !\n              </p>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            id=\"close\"\n            class=\"btn btn-dark\"\n            data-bs-dismiss=\"modal\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Modal -->\n  <!-- Modal 2 -->\n  <div\n    class=\"modal fade\"\n    id=\"exampleModal1\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n  >\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\" style=\"border: black\">\n        <div class=\"modal-header\" style=\"background: #242121; color: white\">\n          <div class=\"r\" style=\"display: flex; margin: auto\">\n            <img src=\"../assets/icons8_close_26px.png\" style=\"height: 31px\" />\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n              You need to authentificate first\n            </h5>\n          </div>\n        </div>\n        <div class=\"modal-body\" style=\"display: flex\">\n          <div class=\"row g-0\">\n            <div class=\"col-md-4\">\n              <img\n                src=\"../assets/R.png\"\n                class=\"img-fluid rounded-start\"\n                alt=\"...\"\n              />\n            </div>\n            <div class=\"col\">\n              <p class=\"card-text\" style=\"margin: revert; margin-left: 29px\">\n                You need to authentificate first\n              </p>\n\n              <div class=\"container row\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-dark\"\n                  @click=\"CreateAccount\"\n                >\n                  Create an account\n                </button>\n                <br />\n                <button\n                  type=\"button\"\n                  class=\"btn btn-outline-dark\"\n                  @click=\"Login\"\n                >\n                  Login\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            id=\"close1\"\n            class=\"btn btn-dark\"\n            data-bs-dismiss=\"modal\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- Modal 2 -->\n</template>\n<script>\nimport \"../Firebase\";\nimport router from \"../router\";\n// @click=\"CheckOutProducts\"\nimport {\n  addDoc,\n  collection,\n  query,\n  getFirestore,\n  onSnapshot,\n} from \"firebase/firestore\";\nconst db = getFirestore();\nconst q = query(collection(db, \"Checkout\"));\nconst authusers = query(collection(db, \"users\"));\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nvar today = new Date();\nvar now_date =\n  today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate();\nconst auth = getAuth();\nexport default {\n  name: \"CartView\",\n  data() {\n    return {\n      uid: localStorage.getItem(\"uidUser\"),\n      CheckAuth: null,\n    };\n  },\n  computed: {\n    totalPrice() {\n      let total = 0;\n\n      for (let item of this.$store.state.cart) {\n        total += item.totalPrice;\n      }\n      total = total + 7;\n      return total.toFixed(2);\n    },\n  },\n  methods: {\n    addToCart(item) {\n      this.$store.commit(\"addToCart\", item);\n\n      console.log(item);\n    },\n    removeFromCart(item) {\n      this.$store.commit(\"removeFromCart\", item);\n    },\n    decrementQuentity(item) {\n      this.$store.commit(\"decrementQuentity\", item);\n    },\n    CheckOutProducts() {\n      onSnapshot(authusers, (querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          if (doc.data().uid == this.uid) {\n            addDoc(\n              q,\n\n              {\n                name: doc.data().name,\n                number: doc.data().number,\n                address: doc.data().address,\n                date: now_date,\n                total: this.totalPrice,\n                cart: this.$store.state.cart,\n              }\n            ).then(() => {\n              this.$store.commit(\"resetCart\");\n            });\n          }\n        });\n      });\n    },\n    CreateAccount() {\n      router.push(\"/signin\");\n      document.getElementById(\"close1\").click();\n    },\n    Login() {\n      router.push(\"/login\");\n      document.getElementById(\"close1\").click();\n    },\n  },\n  created() {\n    onAuthStateChanged(auth, (user) => {\n      if (user) {\n        this.CheckAuth = user;\n      } else {\n        this.CheckAuth = null;\n      }\n    });\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}