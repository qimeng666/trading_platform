{"ast":null,"code":"import \"../Firebase\";\nimport { collection, query, getFirestore, onSnapshot, doc, deleteDoc } from \"firebase/firestore\";\nimport printJS from \"print-js\";\nconst db = getFirestore();\nconst q = query(collection(db, \"Checkout\"));\nexport default {\n  name: \"OrdersView\",\n  data() {\n    return {\n      orders: [],\n      dataProduct: {\n        name: \"\",\n        price: 0,\n        image: \"\",\n        brand: \"\",\n        description: \"\",\n        key: \"\"\n      },\n      productdata: {\n        address: \"\",\n        date: \"\",\n        name: \"\",\n        number: \"\",\n        total: \"\",\n        cart: [],\n        key: \"\"\n      }\n    };\n  },\n  created() {\n    onSnapshot(q, querySnapshot => {\n      this.orders = [];\n      querySnapshot.forEach(doc => {\n        this.orders.push({\n          key: doc.id,\n          name: doc.data().name,\n          address: doc.data().address,\n          number: doc.data().number,\n          date: doc.data().date,\n          total: doc.data().total,\n          cart: doc.data().cart\n        });\n      });\n    });\n  },\n  methods: {\n    getDataKey(key, name) {\n      this.dataProduct.key = key;\n      this.dataProduct.name = name;\n    },\n    RemoveFromCheckout(key) {\n      deleteDoc(doc(db, \"Checkout\", key)).then(() => {\n        document.getElementById(\"close\").click();\n      });\n    },\n    GetOrderData(name, date, address, number, cart, key, total) {\n      this.productdata.name = name;\n      this.productdata.date = date;\n      this.productdata.address = address;\n      this.productdata.number = number;\n      this.productdata.cart = cart;\n      this.productdata.key = key;\n      this.productdata.total = total;\n      console.log(this.productdata);\n    },\n    printinvoice() {\n      printJS({\n        printable: \"printJS-form\",\n        type: \"html\",\n        targetStyles: [\"*\"],\n        scanStyles: true\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["collection","query","getFirestore","onSnapshot","doc","deleteDoc","printJS","db","q","name","data","orders","dataProduct","price","image","brand","description","key","productdata","address","date","number","total","cart","created","querySnapshot","forEach","push","id","methods","getDataKey","RemoveFromCheckout","then","document","getElementById","click","GetOrderData","console","log","printinvoice","printable","type","targetStyles","scanStyles"],"sourceRoot":"","sources":["C:\\Users\\qimeng\\Documents\\GitHub\\trading_platform\\frontend\\src\\views\\Orders.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <br />\n    <h1 style=\"text-align: center\">Orders</h1>\n    <br />\n    <table class=\"table table-bordered\" v-if=\"orders.length > 0\">\n      <thead style=\"background: #39b5ff; color: white\">\n        <tr>\n          <!-- <th scope=\"col\"></th> -->\n          <th scope=\"col\">name</th>\n          <th scope=\"col\">Date</th>\n          <th scope=\"col\">Address</th>\n          <th scope=\"col\">Number</th>\n          <th scope=\"col\">Products</th>\n          <th scope=\"col\">Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in orders\" :key=\"item.name\">\n          <!-- <th scope=\"row\"></th> -->\n          <td class=\"align-middle\">{{ item.name }}</td>\n          <td class=\"align-middle\">{{ item.date }}</td>\n          <td class=\"align-middle\">{{ item.address }}</td>\n          <td class=\"align-middle\">{{ item.number }}</td>\n          <td>\n            <table class=\"table mb-0 table-bordered\">\n              <thead>\n                <tr class=\"table-secondary\">\n                  <th scope=\"col\">Name</th>\n                  <th scope=\"col\">Quantity</th>\n                  <th scope=\"col\">Price</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"cartitem in item.cart\" :key=\"cartitem.name\">\n                  <td>{{ cartitem.name }}</td>\n                  <td>{{ cartitem.quantity }}</td>\n                  <td>{{ cartitem.totalPrice }} DT</td>\n                </tr>\n                <tr>\n                  <td colspan=\"2\" class=\"table-active\">\n                    Total Price (shipping included)\n                  </td>\n                  <td>{{ item.total }} DT</td>\n                </tr>\n              </tbody>\n            </table>\n          </td>\n          <td>\n            <div class=\"d-grid gap-2\">\n              <button\n                type=\"button\"\n                @click=\"\n                  GetOrderData(\n                    item.name,\n                    item.date,\n                    item.address,\n                    item.number,\n                    item.cart,\n                    item.key,\n                    item.total\n                  )\n                \"\n                class=\"btn btn-success\"\n                data-bs-toggle=\"modal\"\n                data-bs-target=\"#validation\"\n              >\n                Validation\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn\"\n                style=\"background: red; color: white\"\n                data-bs-toggle=\"modal\"\n                data-bs-target=\"#delete\"\n                v-on:click=\"getDataKey(item.key, item.name)\"\n              >\n                Delete\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div\n      v-else\n      class=\"row d-flex justify-content-center align-items-center h-100\"\n    >\n      <br />\n      <div>\n        <center>orders page is empty</center>\n        <br />\n        <br />\n        <router-link to=\"/products\">\n          <img src=\"../assets/icons8_back_64px.png\" style=\"height: 37px\" />\n        </router-link>\n        <a style=\"width: auto\"> Continue shopping </a>\n      </div>\n    </div>\n    <!-- Modal 3 (delete) -->\n    <div\n      class=\"modal fade\"\n      id=\"delete\"\n      data-bs-backdrop=\"static\"\n      data-bs-keyboard=\"false\"\n      tabindex=\"-1\"\n      aria-labelledby=\"staticBackdropLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"staticBackdropLabel\">Delete order</h5>\n            <button\n              type=\"button\"\n              class=\"btn-close\"\n              data-bs-dismiss=\"modal\"\n              aria-label=\"Close\"\n            ></button>\n          </div>\n          <div class=\"modal-body\">\n            .\n            <!-- form start here -->\n            <form>\n              <h3>\n                Do you want to delete this order of {{ dataProduct.name }} ?\n              </h3>\n            </form>\n            <!-- form end here -->\n          </div>\n          <div class=\"modal-footer\">\n            <button\n              type=\"button\"\n              id=\"close\"\n              class=\"btn btn-secondary\"\n              data-bs-dismiss=\"modal\"\n            >\n              Close\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn\"\n              style=\"background: red; color: white\"\n              v-on:click=\"RemoveFromCheckout(dataProduct.key)\"\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- fin model -->\n    <!-- Modal  (validation) -->\n    <div\n      class=\"modal fade\"\n      id=\"validation\"\n      data-bs-backdrop=\"static\"\n      data-bs-keyboard=\"false\"\n      tabindex=\"-1\"\n      aria-labelledby=\"staticBackdropLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog modal-xl\">\n        <div class=\"modal-content\" style=\"border: black\">\n          <div class=\"modal-header\" style=\"background: #242121; color: white\">\n            <h5\n              class=\"modal-title\"\n              id=\"staticBackdropLabel\"\n              style=\"display: flex; margin: auto\"\n            >\n              Print the invoice\n            </h5>\n          </div>\n          <div class=\"modal-body\">\n            <!-- form start here -->\n            <div class=\"container\" id=\"printJS-form\">\n              <div class=\"col-md-12\">\n                <div class=\"invoice\">\n                  <!-- begin invoice-company -->\n\n                  <div class=\"row align-items-start\">\n                    <div class=\"col\">SelDig, Inc</div>\n                  </div>\n                  <!-- end invoice-company -->\n                  <!-- begin invoice-header -->\n                  <div class=\"invoice-header\">\n                    <div class=\"invoice-from\">\n                      <small>from</small>\n                      <address class=\"m-t-5 m-b-5\">\n                        <strong class=\"text-inverse\">SelDig, Inc.</strong><br />\n                        Address: Ouerghech, Ghardimaou<br />\n                        Phone: (+216) 54 819 819\n                      </address>\n                    </div>\n                    <div class=\"invoice-to\">\n                      <small>to</small>\n                      <address class=\"m-t-5 m-b-5\">\n                        <strong class=\"text-inverse\">{{\n                          productdata.name\n                        }}</strong\n                        ><br />\n                        Address: {{ productdata.address }}<br />\n                        Phone: (+216) {{ productdata.number }}\n                      </address>\n                    </div>\n                    <div class=\"invoice-date\">\n                      <small>Invoice / July period</small>\n                      <div class=\"date text-inverse m-t-5\">\n                        {{ productdata.date }}\n                      </div>\n                      <br />\n                      <div class=\"invoice-detail\">Services Product</div>\n                    </div>\n                  </div>\n                  <!-- end invoice-header -->\n                  <!-- begin invoice-content -->\n                  <div class=\"invoice-content\">\n                    <!-- begin table-responsive -->\n                    <div class=\"table-responsive\">\n                      <table class=\"table table-invoice\">\n                        <thead>\n                          <tr>\n                            <th>PRODUCTS</th>\n                            <th class=\"text-center\" width=\"10%\">RATE</th>\n                            <th class=\"text-center\" width=\"10%\">QUANTITY</th>\n                            <th class=\"text-right\" width=\"20%\">LINE TOTAL</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr v-for=\"item in productdata.cart\" :key=\"item.name\">\n                            <td>\n                              <span class=\"text-inverse\">{{ item.name }}</span\n                              ><br />\n                              <small>{{ item.brand }}</small>\n                            </td>\n                            <td class=\"text-center\">{{ item.price }} DT</td>\n                            <td class=\"text-center\">{{ item.quantity }}</td>\n                            <td class=\"text-right\">{{ item.totalPrice }} DT</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                    <!-- end table-responsive -->\n                    <!-- begin invoice-price -->\n                    <div class=\"invoice-price\">\n                      <div class=\"invoice-price-left\">\n                        <div class=\"invoice-price-row\">\n                          <div class=\"sub-price\">\n                            <small>SUBTOTAL</small>\n                            <span class=\"text-inverse\"\n                              >{{ productdata.total - 7 }} DT</span\n                            >\n                          </div>\n                          <div class=\"sub-price\">\n                            <i class=\"fa fa-plus text-muted\"></i>\n                          </div>\n                          <div class=\"sub-price\">\n                            <small>SHIPPING</small>\n                            <span class=\"text-inverse\">7 DT</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"invoice-price-right\">\n                        <small>TOTAL</small>\n                        <span class=\"f-w-600\">{{ productdata.total }} DT</span>\n                      </div>\n                    </div>\n                    <!-- end invoice-price -->\n                  </div>\n                  <!-- end invoice-content -->\n                  <!-- begin invoice-note -->\n                  <div class=\"invoice-note\">\n                    * Make all cheques payable to SelDig<br />\n                    * Payment is due within 30 days<br />\n                    * If you have any questions concerning this invoice, contact\n                    contact@rani4tech.com\n                  </div>\n                  <!-- end invoice-note -->\n                  <!-- begin invoice-footer -->\n                  <div class=\"invoice-footer\">\n                    <p class=\"text-center m-b-5 f-w-600\">\n                      THANK YOU FOR YOUR BUSINESS\n                    </p>\n                    <p class=\"text-center\">\n                      <span class=\"m-r-10\"\n                        ><i class=\"fa fa-fw fa-lg fa-globe\"></i>\n                        www.rani4tech.com</span\n                      >\n                      <span class=\"m-r-10\"\n                        ><i class=\"fa fa-fw fa-lg fa-phone-volume\"></i>\n                        T:216-99548790</span\n                      >\n                      <span class=\"m-r-10\"\n                        ><i class=\"fa fa-fw fa-lg fa-envelope\"></i>\n                        ranizouaouicontact@gmail.com</span\n                      >\n                    </p>\n                  </div>\n                  <!-- end invoice-footer -->\n                </div>\n              </div>\n            </div>\n            <!-- form end here -->\n          </div>\n          <div class=\"modal-footer\">\n            <button\n              type=\"button\"\n              id=\"close\"\n              class=\"btn btn-secondary\"\n              data-bs-dismiss=\"modal\"\n            >\n              Close\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn\"\n              style=\"background: red; color: white\"\n              @click=\"printinvoice\"\n            >\n              Export as PDF\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- fin model -->\n  </div>\n</template>\n<script>\nimport \"../Firebase\";\n\nimport {\n  collection,\n  query,\n  getFirestore,\n  onSnapshot,\n  doc,\n  deleteDoc,\n} from \"firebase/firestore\";\nimport printJS from \"print-js\";\nconst db = getFirestore();\nconst q = query(collection(db, \"Checkout\"));\n\nexport default {\n  name: \"OrdersView\",\n  data() {\n    return {\n      orders: [],\n      dataProduct: {\n        name: \"\",\n        price: 0,\n        image: \"\",\n        brand: \"\",\n        description: \"\",\n        key: \"\",\n      },\n      productdata: {\n        address: \"\",\n        date: \"\",\n        name: \"\",\n        number: \"\",\n        total: \"\",\n        cart: [],\n        key: \"\",\n      },\n    };\n  },\n  created() {\n    onSnapshot(q, (querySnapshot) => {\n      this.orders = [];\n      querySnapshot.forEach((doc) => {\n        this.orders.push({\n          key: doc.id,\n          name: doc.data().name,\n          address: doc.data().address,\n          number: doc.data().number,\n          date: doc.data().date,\n          total: doc.data().total,\n          cart: doc.data().cart,\n        });\n      });\n    });\n  },\n  methods: {\n    getDataKey(key, name) {\n      this.dataProduct.key = key;\n      this.dataProduct.name = name;\n    },\n\n    RemoveFromCheckout(key) {\n      deleteDoc(doc(db, \"Checkout\", key)).then(() => {\n        document.getElementById(\"close\").click();\n      });\n    },\n    GetOrderData(name, date, address, number, cart, key, total) {\n      this.productdata.name = name;\n      this.productdata.date = date;\n      this.productdata.address = address;\n      this.productdata.number = number;\n      this.productdata.cart = cart;\n      this.productdata.key = key;\n      this.productdata.total = total;\n      console.log(this.productdata);\n    },\n    printinvoice() {\n      printJS({\n        printable: \"printJS-form\",\n        type: \"html\",\n        targetStyles: [\"*\"],\n        scanStyles: true,\n      });\n    },\n  },\n};\n</script>\n<style>\nbody {\n  background: rgb(255, 255, 255);\n}\n\n.invoice {\n  background: #fff;\n  padding: 20px;\n}\n\n.invoice-company {\n  font-size: 20px;\n}\n\n.invoice-header {\n  margin: 0 -20px;\n  background: #f0f3f4;\n  padding: 20px;\n}\n\n.invoice-date,\n.invoice-from,\n.invoice-to {\n  display: table-cell;\n  width: 1%;\n}\n\n.invoice-from,\n.invoice-to {\n  padding-right: 20px;\n}\n\n.invoice-date .date,\n.invoice-from strong,\n.invoice-to strong {\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.invoice-date {\n  text-align: right;\n  padding-left: 20px;\n}\n\n.invoice-price {\n  background: #f0f3f4;\n  display: table;\n  width: 100%;\n}\n\n.invoice-price .invoice-price-left,\n.invoice-price .invoice-price-right {\n  display: table-cell;\n  padding: 20px;\n  font-size: 20px;\n  font-weight: 600;\n  width: 75%;\n  position: relative;\n  vertical-align: middle;\n}\n\n.invoice-price .invoice-price-left .sub-price {\n  display: table-cell;\n  vertical-align: middle;\n  padding: 0 20px;\n}\n\n.invoice-price small {\n  font-size: 12px;\n  font-weight: 400;\n  display: block;\n}\n\n.invoice-price .invoice-price-row {\n  display: table;\n  float: left;\n}\n\n.invoice-price .invoice-price-right {\n  width: 25%;\n  background: #2d353c;\n  color: #fff;\n  font-size: 28px;\n  text-align: right;\n  vertical-align: bottom;\n  font-weight: 300;\n}\n\n.invoice-price .invoice-price-right small {\n  display: block;\n  opacity: 0.6;\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  font-size: 12px;\n}\n\n.invoice-footer {\n  border-top: 1px solid #ddd;\n  padding-top: 10px;\n  font-size: 10px;\n}\n\n.invoice-note {\n  color: #999;\n  margin-top: 80px;\n  font-size: 85%;\n}\n\n.invoice > div:not(.invoice-footer) {\n  margin-bottom: 20px;\n}\n\n.btn.btn-white,\n.btn.btn-white.disabled,\n.btn.btn-white.disabled:focus,\n.btn.btn-white.disabled:hover,\n.btn.btn-white[disabled],\n.btn.btn-white[disabled]:focus,\n.btn.btn-white[disabled]:hover {\n  color: #2d353c;\n  background: #fff;\n  border-color: #d9dfe3;\n}\n</style>"]},"metadata":{},"sourceType":"module"}